#version 430 core
layout (location = 0) in vec2 position;

out vec4 color;
//in vec2 texCoordOut;
in vec2 levelPositionOut;

uniform int layerIndex;

uniform vec2 patchOrigin;
uniform vec2 rawTexOffset;
uniform int n;

uniform sampler2D tex_pixelmap0; 
uniform sampler2D tex_pixelmap1;
uniform sampler2D tex_pixelmap2;
uniform sampler2D tex_pixelmap3;
uniform sampler2D tex_pixelmap4;
uniform sampler2D tex_pixelmap5;
uniform sampler2D tex_pixelmap6;
uniform sampler2D tex_pixelmap7;
uniform sampler2D tex_pixelmap8;
uniform sampler2D tex_pixelmap9;
uniform sampler2D tex_pixelmap10;
uniform sampler2D tex_pixelmap11;
uniform sampler2D tex_pixelmap12;

void main()
{
	vec3 pixel;
	
	float texPosX = float(mod(levelPositionOut.x + rawTexOffset.x, n - 1));
	float texPosY = float(mod(levelPositionOut.y + rawTexOffset.y, n - 1));

	switch (layerIndex) {
	case 0:
		pixel = texture( tex_pixelmap0, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 1:
		pixel = texture( tex_pixelmap1, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 2:
		pixel = texture( tex_pixelmap2, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 3:
		pixel = texture( tex_pixelmap3, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 4:
		pixel = texture( tex_pixelmap4, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 5:
		pixel = vec3(0,240,0);//texture( tex_pixelmap5, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 6:
		pixel =vec3(240,0,0);//texture( tex_pixelmap6, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 7:
		pixel = texture( tex_pixelmap7, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 8:
		pixel = texture( tex_pixelmap8, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 9:
		pixel = texture( tex_pixelmap9, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 10:
		pixel = texture( tex_pixelmap10, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 11:
		pixel = texture( tex_pixelmap11, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	case 12:
		pixel = texture( tex_pixelmap12, vec2(texPosX/n, texPosY/n), 0).rgb;
		break;
	}

	color = vec4(pixel, 0);
}